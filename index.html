<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Be My Valentine?</title>

  <style>
    :root{
      --bg:#000;
      --card:#fff;
      --text:#151515;
      --accent:#ff2f7d;
      --border:#fff;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      overflow:hidden;
      background: var(--bg);
    }

    /* Make sure overlays can never block clicks */
    .floaties, .floaty, .confetti, .confetti-piece{
      pointer-events:none !important;
    }

    /* Floating/scrolling emoji layer */
    .floaties{
      position:fixed;
      inset:0;
      z-index:0;
      opacity:.7;
    }
    .floaty{
      position:absolute;
      bottom:-70px;
      opacity:0;
      will-change:transform,opacity;
      animation: floatUp linear infinite;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.25));
    }
    @keyframes floatUp{
      0%   { transform: translateY(0) translateX(0) scale(var(--sc)); opacity:0; }
      12%  { opacity:.85; }
      85%  { opacity:.85; }
      100% { transform: translateY(-120vh) translateX(var(--drift)) scale(var(--sc)); opacity:0; }
    }

    .card{
      position:relative;
      z-index:2;
      width:min(560px, 92vw);
      background: var(--card);
      border: 2px solid var(--border);
      border-radius: 24px;
      padding: 22px 18px 18px;
      box-shadow: 0 18px 48px rgba(0,0,0,.55);
      text-align:center;
    }

    .image-wrap{
      width:100%;
      aspect-ratio:1/1;
      border-radius:18px;
      overflow:hidden;
      border: 2px solid var(--border);
      background:#f2f2f2;
      margin-bottom:16px;
    }
    .image-wrap img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    h1{
      margin: 16px 0 10px;
      font-size: clamp(26px, 4.6vw, 36px);
      letter-spacing:.2px;
    }
    p{ margin: 0 0 14px; opacity:.85; }

    .btn-arena{
      width: min(420px, 96%);
      margin: 8px auto 0;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 18px;
      align-items:center;
    }

    .lane{
      position:relative;
      height:58px;
      display:grid;
      place-items:center;
      overflow:visible;
    }

    .btn{
      width: 160px;
      height: 46px;
      border: 0;
      border-radius: 999px;
      font-size: 16px;
      font-weight: 800;
      cursor: pointer;
      background: var(--accent);
      color: #fff;
      box-shadow: 0 8px 18px rgba(0,0,0,.18);
      transition: transform 120ms ease, opacity 120ms ease, filter 120ms ease;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .btn:active{ transform: scale(.985); }
    .btn:disabled{ cursor: default; }

    /* Keep YES above anything that might wander */
    #yesBtn{ position:relative; z-index:10; }

    /* No button uses CSS vars for movement; starts centered */
    #noBtn{
      position:absolute;
      left:50%;
      top:50%;
      --dx: 0px;
      --dy: 0px;
      --s: 1;
      transform: translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))) scale(var(--s));
      transform-origin:center;
      will-change: transform;
    }

    .result{
      margin-top: 12px;
      font-weight: 900;
      font-size: 20px;
      min-height: 32px;
      line-height: 1.1;
    }
    .big-heat{
      display:block;
      font-size: 52px;
      line-height: 1;
      margin-top: 6px;
    }

    /* Confetti overlay (always on top, never clickable) */
    .confetti{
      position:fixed;
      inset:0;
      z-index:9999;
      pointer-events:none;
      overflow:hidden;
      transform: translateZ(0);
    }
    .confetti-piece{
      position: fixed;
      top: -20px;
      left: 0;
      font-size: var(--fs);
      animation: confettiFall var(--dur) linear forwards;
      will-change: transform;
      backface-visibility: hidden;
      pointer-events:none;
    }
    @keyframes confettiFall{
      0%   { transform: translate3d(var(--x), -50px, 0) rotate(0deg); opacity:0; }
      10%  { opacity:1; }
      100% { transform: translate3d(calc(var(--x) + var(--drift)), 110vh, 0) rotate(var(--rot)); opacity:0.98; }
    }
  </style>
</head>

<body>
  <div class="floaties" id="floaties"></div>

  <main class="card" id="card" aria-live="polite">
    <div class="image-wrap">
      <!-- Put valentine2.png in the same repo folder as index.html -->
      <img src="valentine2.png" alt="Romantic moment" />
    </div>

    <h1>Will you be my Valentine?</h1>
    <p>Choose wisely.</p>

    <div class="btn-arena">
      <div class="lane">
        <button class="btn" id="yesBtn" type="button">Yes</button>
      </div>

      <div class="lane" id="laneNo">
        <button class="btn" id="noBtn" type="button">No</button>
      </div>
    </div>

    <div class="result" id="result"></div>
  </main>

  <!-- Keep confetti LAST in body so it paints on top consistently -->
  <div class="confetti" id="confetti"></div>

  <script>
    /* ---------- Floating scroll emojis ---------- */
    const floatiesWrap = document.getElementById("floaties");
    const FLOATS = ["üòò","‚ù§Ô∏è","üíã"];

    function spawnFloaty(){
      const el = document.createElement("div");
      el.className = "floaty";
      el.textContent = FLOATS[Math.floor(Math.random() * FLOATS.length)];

      const left = Math.random() * 100;
      const dur  = 6 + Math.random() * 7;
      const drift = (Math.random()*140 - 70) + "px";
      const sc = (0.8 + Math.random()*1.35).toFixed(2);

      el.style.left = left + "vw";
      el.style.animationDuration = dur + "s";
      el.style.setProperty("--drift", drift);
      el.style.setProperty("--sc", sc);
      el.style.fontSize = (18 + Math.random()*26).toFixed(0) + "px";

      floatiesWrap.appendChild(el);
      setTimeout(() => el.remove(), dur * 1000 + 200);
    }
    for (let i=0;i<12;i++) setTimeout(spawnFloaty, i*220);
    setInterval(spawnFloaty, 520);

    /* ---------- No button: shrinks + jumps around the CARD (only when close/click) ---------- */
    const card  = document.getElementById("card");
    const laneNo = document.getElementById("laneNo");
    const noBtn = document.getElementById("noBtn");
    const yesBtn = document.getElementById("yesBtn");
    const result = document.getElementById("result");

    let ended = false;
    let armed = false;

    let dx = 0, dy = 0;
    let s  = 1.0;

    function setNoState(){
      noBtn.style.setProperty("--dx", dx.toFixed(1) + "px");
      noBtn.style.setProperty("--dy", dy.toFixed(1) + "px");
      noBtn.style.setProperty("--s",  s.toFixed(3));
    }
    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }
    function rand(min,max){ return Math.random()*(max-min)+min; }

    function jumpToClientXY(targetX, targetY){
      const c = card.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();

      const minX = c.left + b.width/2 + 10;
      const maxX = c.right - b.width/2 - 10;
      const minY = c.top  + b.height/2 + 10;
      const maxY = c.bottom - b.height/2 - 10;

      const cx = clamp(targetX, minX, maxX);
      const cy = clamp(targetY, minY, maxY);

      const lane = laneNo.getBoundingClientRect();
      const baseX = lane.left + lane.width/2;
      const baseY = lane.top  + lane.height/2;

      dx = cx - baseX;
      dy = cy - baseY;
      setNoState();
    }

    // Always shrinking (slow)
    setInterval(() => {
      if (ended) return;
      s = Math.max(0.18, s - 0.0035);
      setNoState();
    }, 220);

    function tryEvade(clientX, clientY){
      if (ended) return;

      const b = noBtn.getBoundingClientRect();
      const bx = b.left + b.width/2;
      const by = b.top  + b.height/2;
      const dist = Math.hypot(clientX - bx, clientY - by);

      const trigger = 110; // only move when close
      if (dist < trigger){
        armed = true;

        const awayX = (bx - clientX) / (dist || 1);
        const awayY = (by - clientY) / (dist || 1);
        const jump = 190 + Math.random()*220;

        const targetX = bx + awayX * jump + rand(-90, 90);
        const targetY = by + awayY * (jump * 0.55) + rand(-80, 80);

        s = Math.max(0.18, s - 0.03);
        jumpToClientXY(targetX, targetY);
      }
    }

    // Mouse + touch support
    card.addEventListener("mousemove", (e) => tryEvade(e.clientX, e.clientY));
    card.addEventListener("pointerdown", (e) => tryEvade(e.clientX, e.clientY), { passive: true });
    card.addEventListener("pointermove", (e) => {
      if (e.pointerType !== "mouse") tryEvade(e.clientX, e.clientY);
    }, { passive: true });

    // If they actually hit the No button, jump hard
    noBtn.addEventListener("pointerdown", (e) => {
      e.preventDefault();
      armed = true;
      tryEvade(e.clientX, e.clientY);
      const c = card.getBoundingClientRect();
      jumpToClientXY(
        rand(c.left + 40, c.right - 40),
        rand(c.top + 40,  c.bottom - 40)
      );
    }, { passive: false });

    // Occasionally jump once it has been "armed"
    setInterval(() => {
      if (ended) return;
      if (!armed) return;
      if (Math.random() < 0.55) return;
      const c = card.getBoundingClientRect();
      jumpToClientXY(
        rand(c.left + 40, c.right - 40),
        rand(c.top + 40,  c.bottom - 40)
      );
    }, 650);

    setNoState();

    /* ---------- Confetti (DOM) hearts + kisses ---------- */
    const confettiWrap = document.getElementById("confetti");
    const CONFETTI = ["üíã","‚ù§Ô∏è","ü•∞","üíñ","üíò","üòç"];

    let accepted = false;

    function launchConfetti(){
      const count = 90;

      for (let i=0;i<count;i++){
        const el = document.createElement("div");
        el.className = "confetti-piece";
        el.textContent = CONFETTI[Math.floor(Math.random()*CONFETTI.length)];

        const x = Math.random() * 100;
        const drift = (Math.random()*220 - 110);
        const rot = (Math.random()*720 - 360);
        const durNum = 1.7 + Math.random()*1.2;
        const fs = (18 + Math.random()*18).toFixed(0) + "px";
        const delayNum = Math.random()*0.18;

        el.style.setProperty("--x", x + "vw");
        el.style.setProperty("--drift", drift + "px");
        el.style.setProperty("--rot", rot + "deg");
        el.style.setProperty("--dur", durNum.toFixed(2) + "s");
        el.style.setProperty("--fs", fs);
        el.style.animationDelay = delayNum.toFixed(2) + "s";

        confettiWrap.appendChild(el);

        const totalMs = (durNum + delayNum + 0.35) * 1000;
        setTimeout(() => el.remove(), totalMs);
      }
    }

    /* ---------- YES button ---------- */
    yesBtn.addEventListener("click", () => {
      if (!accepted) {
        result.innerHTML = `Smart choice, baby girl... üíã<span class="big-heat">‚ù§Ô∏è‚Äçüî•</span>`;
        accepted = true;

        ended = true; // stop the No chaos after success
        laneNo.style.visibility = "hidden";   // keep spacing
        laneNo.style.pointerEvents = "none";  // no blocking
      } else {
        result.innerHTML = `Again? I like the way you think... üòè<span class="big-heat">‚ù§Ô∏è‚Äçüî•</span>`;
      }

      requestAnimationFrame(() => {
        launchConfetti();
        setTimeout(launchConfetti, 250);
      });
    });
  </script>
</body>
</html>
